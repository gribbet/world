{"mappings":"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","sources":["node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/vec2.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","src/common.ts","src/constants.ts","src/math.ts","node_modules/process/browser.js","node_modules/lru-cache/index.js","src/image-load.ts","src/elevation.ts","src/tile-shape.ts","src/world.ts","src/tiles.ts","src/vertex.glsl","src/render.glsl","src/depth.glsl","src/main.ts"],"sourcesContent":["/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","export const debounce = (f: (...args: any[]) => void, delay: number) => {\n  let timeout: number;\n  return (...args: any[]) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => f(args), delay);\n  };\n};\n\nexport const range = (start: number, end: number) =>\n  Array.from({ length: end - start }, (_, k) => k + start);\n","export const circumference = 40075017;\nexport const imageryUrl =\n  \"http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}\";\nexport const terrainUrl =\n  \"https://api.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZ3JhaGFtZ2liYm9ucyIsImEiOiJja3Qxb3Q5bXQwMHB2MnBwZzVyNzgyMnZ6In0.4qLjlbLm6ASuJ5v5gN6FHQ\";\n","import { vec3 } from \"gl-matrix\";\nimport { circumference } from \"./constants\";\n\nexport const quadratic = (a: number, b: number, c: number) => {\n  const q = Math.sqrt(b * b - 4 * a * c);\n  return [(-b - q) / (2 * a), (-b + q) / (2 * a)];\n};\n\nexport const mercator = ([lng, lat, alt]: vec3) =>\n  [\n    lng / 360 + 0.5,\n    -Math.asinh(Math.tan((lat / 180) * Math.PI)) / (2 * Math.PI) + 0.5,\n    alt / circumference,\n  ] as vec3;\n\nexport const geodetic = ([x, y, z]: vec3) =>\n  [\n    (x - 0.5) * 360,\n    (Math.atan(Math.sinh(-(y - 0.5) * (2 * Math.PI))) * 180) / Math.PI,\n    z * circumference,\n  ] as vec3;\n\nexport const tileToMercator = ([x, y, z]: vec3) => {\n  const k = Math.pow(2, -z);\n  return [x * k, y * k, 0] as vec3;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","const perf = typeof performance === 'object' && performance &&\n  typeof performance.now === 'function' ? performance : Date\n\nconst warned = new Set()\nconst deprecatedOption = (opt, instead) => {\n  const code = `LRU_CACHE_OPTION_${opt}`\n  if (shouldWarn(code)) {\n    warn(code, `${opt} option`, `options.${instead}`, LRUCache)\n  }\n}\nconst deprecatedMethod = (method, instead) => {\n  const code = `LRU_CACHE_METHOD_${method}`\n  if (shouldWarn(code)) {\n    const { prototype } = LRUCache\n    const { get } = Object.getOwnPropertyDescriptor(prototype, method)\n    warn(code, `${method} method`, `cache.${instead}()`, get)\n  }\n}\nconst deprecatedProperty = (field, instead) => {\n  const code = `LRU_CACHE_PROPERTY_${field}`\n  if (shouldWarn(code)) {\n    const { prototype } = LRUCache\n    const { get } = Object.getOwnPropertyDescriptor(prototype, field)\n    warn(code, `${field} property`, `cache.${instead}`, get)\n  }\n}\n\nconst shouldWarn = code => typeof process === 'object' &&\n  process &&\n  !warned.has(code)\n\nconst warn = (code, what, instead, fn) => {\n  warned.add(code)\n  const msg = `The ${what} is deprecated. Please use ${instead} instead.`\n  process.emitWarning(msg, 'DeprecationWarning', code, fn)\n}\n\nconst isPosInt = n => n && n === Math.floor(n) && n > 0 && isFinite(n)\n\n/* istanbul ignore next - This is a little bit ridiculous, tbh.\n * The maximum array length is 2^32-1 or thereabouts on most JS impls.\n * And well before that point, you're caching the entire world, I mean,\n * that's ~32GB of just integers for the next/prev links, plus whatever\n * else to hold that many keys and values.  Just filling the memory with\n * zeroes at init time is brutal when you get that big.\n * But why not be complete?\n * Maybe in the future, these limits will have expanded. */\nconst getUintArray = max => !isPosInt(max) ? null\n: max <= Math.pow(2, 8) ? Uint8Array\n: max <= Math.pow(2, 16) ? Uint16Array\n: max <= Math.pow(2, 32) ? Uint32Array\n: max <= Number.MAX_SAFE_INTEGER ? ZeroArray\n: null\n\nclass ZeroArray extends Array {\n  constructor (size) {\n    super(size)\n    this.fill(0)\n  }\n}\n\nclass Stack {\n  constructor (max) {\n    const UintArray = max ? getUintArray(max) : Array\n    this.heap = new UintArray(max)\n    this.length = 0\n  }\n  push (n) {\n    this.heap[this.length++] = n\n  }\n  pop () {\n    return this.heap[--this.length]\n  }\n}\n\nclass LRUCache {\n  constructor (options = {}) {\n    const {\n      max = 0,\n      ttl,\n      ttlResolution = 1,\n      ttlAutopurge,\n      updateAgeOnGet,\n      allowStale,\n      dispose,\n      disposeAfter,\n      noDisposeOnSet,\n      noUpdateTTL,\n      maxSize = 0,\n      sizeCalculation,\n      fetchMethod,\n    } = options\n\n    // deprecated options, don't trigger a warning for getting them if\n    // the thing being passed in is another LRUCache we're copying.\n    const {\n      length,\n      maxAge,\n      stale,\n    } = options instanceof LRUCache ? {} : options\n\n    if (max !== 0 && !isPosInt(max)) {\n      throw new TypeError('max option must be a nonnegative integer')\n    }\n\n    const UintArray = max ? getUintArray(max) : Array\n    if (!UintArray) {\n      throw new Error('invalid max value: ' + max)\n    }\n\n    this.max = max\n    this.maxSize = maxSize\n    this.sizeCalculation = sizeCalculation || length\n    if (this.sizeCalculation) {\n      if (!this.maxSize) {\n        throw new TypeError('cannot set sizeCalculation without setting maxSize')\n      }\n      if (typeof this.sizeCalculation !== 'function') {\n        throw new TypeError('sizeCalculating set to non-function')\n      }\n    }\n\n    this.fetchMethod = fetchMethod || null\n    if (this.fetchMethod && typeof this.fetchMethod !== 'function') {\n      throw new TypeError('fetchMethod must be a function if specified')\n    }\n\n\n    this.keyMap = new Map()\n    this.keyList = new Array(max).fill(null)\n    this.valList = new Array(max).fill(null)\n    this.next = new UintArray(max)\n    this.prev = new UintArray(max)\n    this.head = 0\n    this.tail = 0\n    this.free = new Stack(max)\n    this.initialFill = 1\n    this.size = 0\n\n    if (typeof dispose === 'function') {\n      this.dispose = dispose\n    }\n    if (typeof disposeAfter === 'function') {\n      this.disposeAfter = disposeAfter\n      this.disposed = []\n    } else {\n      this.disposeAfter = null\n      this.disposed = null\n    }\n    this.noDisposeOnSet = !!noDisposeOnSet\n    this.noUpdateTTL = !!noUpdateTTL\n\n    if (this.maxSize !== 0) {\n      if (!isPosInt(this.maxSize)) {\n        throw new TypeError('maxSize must be a positive integer if specified')\n      }\n      this.initializeSizeTracking()\n    }\n\n    this.allowStale = !!allowStale || !!stale\n    this.updateAgeOnGet = !!updateAgeOnGet\n    this.ttlResolution = isPosInt(ttlResolution) || ttlResolution === 0\n      ? ttlResolution : 1\n    this.ttlAutopurge = !!ttlAutopurge\n    this.ttl = ttl || maxAge || 0\n    if (this.ttl) {\n      if (!isPosInt(this.ttl)) {\n        throw new TypeError('ttl must be a positive integer if specified')\n      }\n      this.initializeTTLTracking()\n    }\n\n    // do not allow completely unbounded caches\n    if (this.max === 0 && this.ttl === 0 && this.maxSize === 0) {\n      throw new TypeError('At least one of max, maxSize, or ttl is required')\n    }\n    if (!this.ttlAutopurge && !this.max && !this.maxSize) {\n      const code = 'LRU_CACHE_UNBOUNDED'\n      if (shouldWarn(code)) {\n        warned.add(code)\n        const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n          'result in unbounded memory consumption.'\n        process.emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache)\n      }\n    }\n\n    if (stale) {\n      deprecatedOption('stale', 'allowStale')\n    }\n    if (maxAge) {\n      deprecatedOption('maxAge', 'ttl')\n    }\n    if (length) {\n      deprecatedOption('length', 'sizeCalculation')\n    }\n  }\n\n  getRemainingTTL (key) {\n    return this.has(key) ? Infinity : 0\n  }\n\n  initializeTTLTracking () {\n    this.ttls = new ZeroArray(this.max)\n    this.starts = new ZeroArray(this.max)\n\n    this.setItemTTL = (index, ttl) => {\n      this.starts[index] = ttl !== 0 ? perf.now() : 0\n      this.ttls[index] = ttl\n      if (ttl !== 0 && this.ttlAutopurge) {\n        const t = setTimeout(() => {\n          if (this.isStale(index)) {\n            this.delete(this.keyList[index])\n          }\n        }, ttl + 1)\n        /* istanbul ignore else - unref() not supported on all platforms */\n        if (t.unref) {\n          t.unref()\n        }\n      }\n    }\n\n    this.updateItemAge = (index) => {\n      this.starts[index] = this.ttls[index] !== 0 ? perf.now() : 0\n    }\n\n    // debounce calls to perf.now() to 1s so we're not hitting\n    // that costly call repeatedly.\n    let cachedNow = 0\n    const getNow = () => {\n      const n = perf.now()\n      if (this.ttlResolution > 0) {\n        cachedNow = n\n        const t = setTimeout(() => cachedNow = 0, this.ttlResolution)\n        /* istanbul ignore else - not available on all platforms */\n        if (t.unref) {\n          t.unref()\n        }\n      }\n      return n\n    }\n\n    this.getRemainingTTL = (key) => {\n      const index = this.keyMap.get(key)\n      if (index === undefined) {\n        return 0\n      }\n      return this.ttls[index] === 0 || this.starts[index] === 0 ? Infinity\n        : ((this.starts[index] + this.ttls[index]) - (cachedNow || getNow()))\n    }\n\n    this.isStale = (index) => {\n      return this.ttls[index] !== 0 && this.starts[index] !== 0 &&\n        ((cachedNow || getNow()) - this.starts[index] > this.ttls[index])\n    }\n  }\n  updateItemAge (index) {}\n  setItemTTL (index, ttl) {}\n  isStale (index) { return false }\n\n  initializeSizeTracking () {\n    this.calculatedSize = 0\n    this.sizes = new ZeroArray(this.max)\n    this.removeItemSize = index => this.calculatedSize -= this.sizes[index]\n    this.requireSize = (k, v, size, sizeCalculation) => {\n      if (sizeCalculation && !size) {\n        size = sizeCalculation(v, k)\n      }\n      if (!isPosInt(size)) {\n        throw new TypeError('size must be positive integer')\n      }\n      return size\n    }\n    this.addItemSize = (index, v, k, size) => {\n      this.sizes[index] = size\n      const maxSize = this.maxSize - this.sizes[index]\n      while (this.calculatedSize > maxSize) {\n        this.evict()\n      }\n      this.calculatedSize += this.sizes[index]\n    }\n    this.delete = k => {\n      if (this.size !== 0) {\n        const index = this.keyMap.get(k)\n        if (index !== undefined) {\n          this.calculatedSize -= this.sizes[index]\n        }\n      }\n      return LRUCache.prototype.delete.call(this, k)\n    }\n  }\n  removeItemSize (index) {}\n  addItemSize (index, v, k, size) {}\n  requireSize (k, v, size, sizeCalculation) {\n    if (size || sizeCalculation) {\n      throw new TypeError('cannot set size without setting maxSize on cache')\n    }\n  }\n\n  *indexes ({ allowStale = this.allowStale } = {}) {\n    if (this.size) {\n      for (let i = this.tail; true; ) {\n        if (!this.isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.isStale(i)) {\n          yield i\n        }\n        if (i === this.head) {\n          break\n        } else {\n          i = this.prev[i]\n        }\n      }\n    }\n  }\n\n  *rindexes ({ allowStale = this.allowStale } = {}) {\n    if (this.size) {\n      for (let i = this.head; true; ) {\n        if (!this.isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.isStale(i)) {\n          yield i\n        }\n        if (i === this.tail) {\n          break\n        } else {\n          i = this.next[i]\n        }\n      }\n    }\n  }\n\n  isValidIndex (index) {\n    return this.keyMap.get(this.keyList[index]) === index\n  }\n\n  *entries () {\n    for (const i of this.indexes()) {\n      yield [this.keyList[i], this.valList[i]]\n    }\n  }\n  *rentries () {\n    for (const i of this.rindexes()) {\n      yield [this.keyList[i], this.valList[i]]\n    }\n  }\n\n  *keys () {\n    for (const i of this.indexes()) {\n      yield this.keyList[i]\n    }\n  }\n  *rkeys () {\n    for (const i of this.rindexes()) {\n      yield this.keyList[i]\n    }\n  }\n\n  *values () {\n    for (const i of this.indexes()) {\n      yield this.valList[i]\n    }\n  }\n  *rvalues () {\n    for (const i of this.rindexes()) {\n      yield this.valList[i]\n    }\n  }\n\n  [Symbol.iterator] () {\n    return this.entries()\n  }\n\n  find (fn, getOptions = {}) {\n    for (const i of this.indexes()) {\n      if (fn(this.valList[i], this.keyList[i], this)) {\n        return this.get(this.keyList[i], getOptions)\n      }\n    }\n  }\n\n  forEach (fn, thisp = this) {\n    for (const i of this.indexes()) {\n      fn.call(thisp, this.valList[i], this.keyList[i], this)\n    }\n  }\n\n  rforEach (fn, thisp = this) {\n    for (const i of this.rindexes()) {\n      fn.call(thisp, this.valList[i], this.keyList[i], this)\n    }\n  }\n\n  get prune () {\n    deprecatedMethod('prune', 'purgeStale')\n    return this.purgeStale\n  }\n\n  purgeStale () {\n    let deleted = false\n    for (const i of this.rindexes({ allowStale: true })) {\n      if (this.isStale(i)) {\n        this.delete(this.keyList[i])\n        deleted = true\n      }\n    }\n    return deleted\n  }\n\n  dump () {\n    const arr = []\n    for (const i of this.indexes()) {\n      const key = this.keyList[i]\n      const value = this.valList[i]\n      const entry = { value }\n      if (this.ttls) {\n        entry.ttl = this.ttls[i]\n      }\n      if (this.sizes) {\n        entry.size = this.sizes[i]\n      }\n      arr.unshift([key, entry])\n    }\n    return arr\n  }\n\n  load (arr) {\n    this.clear()\n    for (const [key, entry] of arr) {\n      this.set(key, entry.value, entry)\n    }\n  }\n\n  dispose (v, k, reason) {}\n\n  set (k, v, {\n    ttl = this.ttl,\n    noDisposeOnSet = this.noDisposeOnSet,\n    size = 0,\n    sizeCalculation = this.sizeCalculation,\n    noUpdateTTL = this.noUpdateTTL,\n  } = {}) {\n    size = this.requireSize(k, v, size, sizeCalculation)\n    let index = this.size === 0 ? undefined : this.keyMap.get(k)\n    if (index === undefined) {\n      // addition\n      index = this.newIndex()\n      this.keyList[index] = k\n      this.valList[index] = v\n      this.keyMap.set(k, index)\n      this.next[this.tail] = index\n      this.prev[index] = this.tail\n      this.tail = index\n      this.size ++\n      this.addItemSize(index, v, k, size)\n      noUpdateTTL = false\n    } else {\n      // update\n      const oldVal = this.valList[index]\n      if (v !== oldVal) {\n        if (!noDisposeOnSet) {\n          this.dispose(oldVal, k, 'set')\n          if (this.disposeAfter) {\n            this.disposed.push([oldVal, k, 'set'])\n          }\n        }\n        this.removeItemSize(index)\n        this.valList[index] = v\n        this.addItemSize(index, v, k, size)\n      }\n      this.moveToTail(index)\n    }\n    if (ttl !== 0 && this.ttl === 0 && !this.ttls) {\n      this.initializeTTLTracking()\n    }\n    if (!noUpdateTTL) {\n      this.setItemTTL(index, ttl)\n    }\n    if (this.disposeAfter) {\n      while (this.disposed.length) {\n        this.disposeAfter(...this.disposed.shift())\n      }\n    }\n    return this\n  }\n\n  newIndex () {\n    if (this.size === 0) {\n      return this.tail\n    }\n    if (this.size === this.max) {\n      return this.evict()\n    }\n    if (this.free.length !== 0) {\n      return this.free.pop()\n    }\n    // initial fill, just keep writing down the list\n    return this.initialFill++\n  }\n\n  pop () {\n    if (this.size) {\n      const val = this.valList[this.head]\n      this.evict()\n      return val\n    }\n  }\n\n  evict () {\n    const head = this.head\n    const k = this.keyList[head]\n    const v = this.valList[head]\n    this.dispose(v, k, 'evict')\n    if (this.disposeAfter) {\n      this.disposed.push([v, k, 'evict'])\n    }\n    this.removeItemSize(head)\n    this.head = this.next[head]\n    this.keyMap.delete(k)\n    this.size --\n    return head\n  }\n\n  has (k) {\n    return this.keyMap.has(k) && !this.isStale(this.keyMap.get(k))\n  }\n\n  // like get(), but without any LRU updating or TTL expiration\n  peek (k, { allowStale = this.allowStale } = {}) {\n    const index = this.keyMap.get(k)\n    if (index !== undefined && (allowStale || !this.isStale(index))) {\n      return this.valList[index]\n    }\n  }\n\n  backgroundFetch (k, index) {\n    const v = index === undefined ? undefined : this.valList[index]\n    if (this.isBackgroundFetch(v)) {\n      return v\n    }\n    const p = Promise.resolve(this.fetchMethod(k, v)).then(v => {\n      if (this.keyMap.get(k) === index && p === this.valList[index]) {\n        this.set(k, v)\n      }\n      return v\n    })\n    p.__staleWhileFetching = v\n    if (index === undefined) {\n      this.set(k, p)\n      index = this.keyMap.get(k)\n    } else {\n      this.valList[index] = p\n    }\n    return p\n  }\n\n  isBackgroundFetch (p) {\n    return p && typeof p === 'object' && typeof p.then === 'function' &&\n      Object.prototype.hasOwnProperty.call(p, '__staleWhileFetching')\n  }\n\n  async fetch (k, {\n    allowStale = this.allowStale,\n    updateAgeOnGet = this.updateAgeOnGet,\n  } = {}) {\n    if (!this.fetchMethod) {\n      return this.get(k, {allowStale, updateAgeOnGet})\n    }\n\n    let index = this.keyMap.get(k)\n    if (index === undefined) {\n      return this.backgroundFetch(k, index)\n    } else {\n      // in cache, maybe already fetching\n      const v = this.valList[index]\n      if (this.isBackgroundFetch(v)) {\n        return allowStale && v.__staleWhileFetching !== undefined\n          ? v.__staleWhileFetching : v\n      }\n\n      if (!this.isStale(index)) {\n        this.moveToTail(index)\n        if (updateAgeOnGet) {\n          this.updateItemAge(index)\n        }\n        return v\n      }\n\n      // ok, it is stale, and not already fetching\n      // refresh the cache.\n      const p = this.backgroundFetch(k, index)\n      return allowStale && p.__staleWhileFetching !== undefined\n        ? p.__staleWhileFetching : p\n    }\n  }\n\n  get (k, {\n    allowStale = this.allowStale,\n    updateAgeOnGet = this.updateAgeOnGet,\n  } = {}) {\n    const index = this.keyMap.get(k)\n    if (index !== undefined) {\n      const value = this.valList[index]\n      const fetching = this.isBackgroundFetch(value)\n      if (this.isStale(index)) {\n        // delete only if not an in-flight background fetch\n        if (!fetching) {\n          this.delete(k)\n          return allowStale ? value : undefined\n        } else {\n          return allowStale ? value.__staleWhileFetching : undefined\n        }\n      } else {\n        // if we're currently fetching it, we don't actually have it yet\n        // it's not stale, which means this isn't a staleWhileRefetching,\n        // so we just return undefined\n        if (fetching) {\n          return undefined\n        }\n        this.moveToTail(index)\n        if (updateAgeOnGet) {\n          this.updateItemAge(index)\n        }\n        return value\n      }\n    }\n  }\n\n  connect (p, n) {\n    this.prev[n] = p\n    this.next[p] = n\n  }\n\n  moveToTail (index) {\n    // if tail already, nothing to do\n    // if head, move head to next[index]\n    // else\n    //   move next[prev[index]] to next[index] (head has no prev)\n    //   move prev[next[index]] to prev[index]\n    // prev[index] = tail\n    // next[tail] = index\n    // tail = index\n    if (index !== this.tail) {\n      if (index === this.head) {\n        this.head = this.next[index]\n      } else {\n        this.connect(this.prev[index], this.next[index])\n      }\n      this.connect(this.tail, index)\n      this.tail = index\n    }\n  }\n\n  get del () {\n    deprecatedMethod('del', 'delete')\n    return this.delete\n  }\n  delete (k) {\n    let deleted = false\n    if (this.size !== 0) {\n      const index = this.keyMap.get(k)\n      if (index !== undefined) {\n        deleted = true\n        if (this.size === 1) {\n          this.clear()\n        } else {\n          this.removeItemSize(index)\n          this.dispose(this.valList[index], k, 'delete')\n          if (this.disposeAfter) {\n            this.disposed.push([this.valList[index], k, 'delete'])\n          }\n          this.keyMap.delete(k)\n          this.keyList[index] = null\n          this.valList[index] = null\n          if (index === this.tail) {\n            this.tail = this.prev[index]\n          } else if (index === this.head) {\n            this.head = this.next[index]\n          } else {\n            this.next[this.prev[index]] = this.next[index]\n            this.prev[this.next[index]] = this.prev[index]\n          }\n          this.size --\n          this.free.push(index)\n        }\n      }\n    }\n    if (this.disposed) {\n      while (this.disposed.length) {\n        this.disposeAfter(...this.disposed.shift())\n      }\n    }\n    return deleted\n  }\n\n  clear () {\n    if (this.dispose !== LRUCache.prototype.dispose) {\n      for (const index of this.rindexes({ allowStale: true })) {\n        this.dispose(this.valList[index], this.keyList[index], 'delete')\n      }\n    }\n    if (this.disposeAfter) {\n      for (const index of this.rindexes({ allowStale: true })) {\n        this.disposed.push([this.valList[index], this.keyList[index], 'delete'])\n      }\n    }\n    this.keyMap.clear()\n    this.valList.fill(null)\n    this.keyList.fill(null)\n    if (this.ttls) {\n      this.ttls.fill(0)\n      this.starts.fill(0)\n    }\n    if (this.sizes) {\n      this.sizes.fill(0)\n    }\n    this.head = 0\n    this.tail = 0\n    this.initialFill = 1\n    this.free.length = 0\n    this.calculatedSize = 0\n    this.size = 0\n    if (this.disposed) {\n      while (this.disposed.length) {\n        this.disposeAfter(...this.disposed.shift())\n      }\n    }\n  }\n  get reset () {\n    deprecatedMethod('reset', 'clear')\n    return this.clear\n  }\n\n  get length () {\n    deprecatedProperty('length', 'size')\n    return this.size\n  }\n}\n\nmodule.exports = LRUCache\n","export interface ImageLoad {\n  image: HTMLImageElement;\n  loaded: boolean;\n  cancel: () => void;\n}\n\nexport const loadImage: (_: {\n  url: string;\n  onLoad?: (image: HTMLImageElement) => void;\n  onError?: (error: string) => void;\n}) => ImageLoad = ({ url, onLoad, onError }) => {\n  let loaded = false;\n\n  const image = new Image();\n  image.crossOrigin = \"anonymous\";\n  image.onload = async () => {\n    loaded = true;\n    onLoad?.(image);\n  };\n  image.onerror = (error) => onError?.(error.toString());\n  image.src = url;\n\n  const cancel = () => {\n    if (!loaded) image.src = \"\";\n  };\n\n  return {\n    image,\n    get loaded() {\n      return loaded;\n    },\n    cancel,\n  };\n};\n","import * as LRUCache from \"lru-cache\";\nimport { terrainUrl } from \"./constants\";\nimport { loadImage } from \"./image-load\";\nimport { mercator } from \"./math\";\n\nconst z = 12;\n\nconst cache = new LRUCache<string, Promise<number>>({\n  max: 1000,\n});\n\nexport const elevation: ([lng, lat]: [number, number]) => Promise<number> = ([\n  lng,\n  lat,\n]) => {\n  const k = Math.pow(2, z);\n  const p = mercator([lng, lat, 0]).map((_) => _ * k);\n  const [x, y] = p.map((_) => Math.floor(_ % k));\n  const [px, py] = p.map((_) => _ % 1);\n  const key = `${lng}-${lat}`;\n  const cached = cache.get(key);\n  if (cached) return cached;\n  const result = tile(x, y, z).then((_) => _.query(px, py));\n  cache.set(key, result);\n  return result;\n};\n\ninterface Tile {\n  query(x: number, y: number): number;\n}\n\nconst tileCache = new LRUCache<string, Promise<Tile>>({\n  max: 10000,\n});\n\nconst tile = (x: number, y: number, z: number) => {\n  const key = [x, y, z].join(\"-\");\n  const cached = tileCache.get(key);\n  if (cached) return cached;\n  const result = loadTile(x, y, z);\n  tileCache.set(key, result);\n  return result;\n};\n\nconst loadTile = async (x: number, y: number, z: number) => {\n  try {\n    const image = await new Promise<HTMLImageElement>((onLoad, onError) => {\n      const url = terrainUrl\n        .replace(\"{x}\", x.toString())\n        .replace(\"{y}\", y.toString())\n        .replace(\"{z}\", z.toString());\n      loadImage({ url, onLoad, onError });\n    });\n    const { width, height } = image;\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext(\"2d\");\n    if (!context) throw new Error(\"Context failure\");\n\n    context.drawImage(image, 0, 0, width, height);\n\n    const query = (x: number, y: number) => {\n      const { data } = context.getImageData(x * width, y * height, 1, 1);\n      const [r, g, b] = data;\n      return (r * 65536 + g * 256 + b) / 10 - 10000;\n    };\n\n    return { query };\n  } catch (error) {\n    console.warn(\"Elevation tile load failure\", { x, y, z });\n    return { query: () => 0 };\n  }\n};\n","import { vec3 } from \"gl-matrix\";\nimport * as LruCache from \"lru-cache\";\nimport { elevation } from \"./elevation\";\nimport { geodetic, tileToMercator } from \"./math\";\n\nlet tileShapes = new LruCache<string, vec3[]>({\n  max: 10000,\n});\n\nlet tileShapesCalculations = new LruCache<string, Promise<vec3[]>>({\n  max: 100,\n});\n\nexport const tileShape: (xyz: vec3) => vec3[] | undefined = ([x, y, z]) => {\n  const key = `${z}-${x}-${y}`;\n  const cached = tileShapes.get(key);\n  if (cached) return cached;\n\n  if (tileShapesCalculations.get(key)) return undefined;\n\n  calculateTileShape([x, y, z]).then((_) => {\n    tileShapes.set(key, _);\n    tileShapesCalculations.delete(key);\n  });\n\n  return undefined;\n};\n\nconst calculateTileShape: (xyz: vec3) => Promise<vec3[]> = ([x, y, z]) => {\n  return Promise.all(\n    [\n      [0, 0],\n      [1, 0],\n      [1, 1],\n      [0, 1],\n    ]\n      .map<vec3>(([u, v]) => [x + u, y + v, z])\n      .map(tileToMercator)\n      .map(geodetic)\n      .map<Promise<vec3>>(async ([lng, lat]) => [\n        lng,\n        lat,\n        await elevation([lng, lat]),\n      ])\n  );\n};\n","import { glMatrix, mat4, vec2, vec3, vec4 } from \"gl-matrix\";\nimport { debounce, range } from \"./common\";\nimport { circumference } from \"./constants\";\nimport depthSource from \"./depth.glsl\";\nimport { geodetic, mercator, quadratic } from \"./math\";\nimport renderSource from \"./render.glsl\";\nimport { tileShape } from \"./tile-shape\";\nimport { createTiles } from \"./tiles\";\nimport vertexSource from \"./vertex.glsl\";\n\nexport interface World {\n  destroy: () => void;\n}\n\nconst n = 16;\n\nglMatrix.setMatrixArrayType(Array);\n\nconst one = 1073741824; // 2^30\nconst to = ([x, y, z]: vec3) =>\n  [Math.floor(x * one), Math.floor(y * one), Math.floor(z * one)] as vec3;\n\nconst indices = range(0, n).flatMap((y) =>\n  range(0, n).flatMap((x) => [\n    y * (n + 1) + x,\n    (y + 1) * (n + 1) + x + 1,\n    y * (n + 1) + x + 1,\n    y * (n + 1) + x,\n    (y + 1) * (n + 1) + x,\n    (y + 1) * (n + 1) + x + 1,\n  ])\n);\n\nconst skirt = 0.1;\nconst uvw = range(0, n + 1).flatMap((y) =>\n  range(0, n + 1).flatMap((x) => {\n    let u = (x - 1) / (n - 2);\n    let v = (y - 1) / (n - 2);\n    let w = 0;\n    if (x === 0) {\n      u = 0;\n      w = -skirt;\n    }\n    if (x === n) {\n      u = 1;\n      w = -skirt;\n    }\n    if (y === 0) {\n      v = 0;\n      w = -skirt;\n    }\n    if (y === n) {\n      v = 1;\n      w = -skirt;\n    }\n\n    return [u, v, w];\n  })\n);\n\ninterface Anchor {\n  screen: vec2;\n  world: vec3;\n  distance: number;\n}\n\nexport const world: (canvas: HTMLCanvasElement) => World = (canvas) => {\n  let camera: vec3 = [0, 0, circumference];\n  let bearing = 0;\n  let pitch = 0;\n  let width = canvas.clientWidth;\n  let height = canvas.clientHeight;\n  let anchor: Anchor | undefined;\n\n  const projection = mat4.create();\n  const modelView = mat4.create();\n  const matrix = mat4.create();\n  const vector = vec3.create();\n\n  const mouseAnchor: (screen: vec2) => Anchor = (screen) => {\n    const world = pick(screen);\n    const distance = vec3.distance(mercator(world), mercator(camera));\n    return {\n      screen,\n      world,\n      distance,\n    };\n  };\n\n  const clearAnchor = debounce(() => {\n    anchor = undefined;\n  }, 100);\n\n  canvas.addEventListener(\"mousedown\", ({ x, y }) => {\n    anchor = mouseAnchor([x, y]);\n  });\n\n  canvas.addEventListener(\n    \"mousemove\",\n    ({ buttons, movementX, movementY, x, y }) => {\n      if (!anchor) return;\n      if (buttons === 1) {\n        anchor = {\n          ...anchor,\n          screen: [x, y],\n        };\n      } else if (buttons === 2) {\n        bearing -= (movementX / width) * Math.PI;\n        pitch = Math.min(\n          0.5 * Math.PI,\n          Math.max(0, pitch - (movementY / height) * Math.PI)\n        );\n      }\n    }\n  );\n\n  canvas.addEventListener(\"mouseup\", clearAnchor);\n\n  canvas.addEventListener(\"wheel\", (event) => {\n    event.preventDefault();\n    const { x, y } = event;\n    if (!anchor) anchor = mouseAnchor([x, y]);\n    anchor = {\n      ...anchor,\n      distance: anchor.distance * Math.exp(event.deltaY * 0.001),\n    };\n    clearAnchor();\n  });\n\n  canvas.addEventListener(\"contextmenu\", (event) => event.preventDefault());\n\n  const resizer = new ResizeObserver(([{ contentRect: size }]) => {\n    width = size.width;\n    height = size.height;\n    canvas.width = width;\n    canvas.height = height;\n    gl.viewport(0, 0, width, height);\n  });\n  resizer.observe(canvas);\n\n  const gl = canvas.getContext(\"webgl\") as WebGL2RenderingContext;\n  if (!gl) throw new Error(\"WebGL context failure\");\n\n  const tiles = createTiles(gl);\n\n  const loadShader = (type: number, source: string) => {\n    const shader = gl.createShader(type);\n    if (!shader) return;\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      console.log(\"Compilation failed\", gl.getShaderInfoLog(shader));\n      gl.deleteShader(shader);\n      return;\n    }\n\n    return shader;\n  };\n\n  const vertexShader = loadShader(gl.VERTEX_SHADER, vertexSource);\n  const renderShader = loadShader(gl.FRAGMENT_SHADER, renderSource);\n  const depthShader = loadShader(gl.FRAGMENT_SHADER, depthSource);\n  if (!vertexShader || !renderShader || !depthShader)\n    throw new Error(\"Shader failure\");\n\n  const renderProgram = gl.createProgram();\n  if (!renderProgram) throw new Error(\"Program creation failed\");\n  gl.attachShader(renderProgram, vertexShader);\n  gl.attachShader(renderProgram, renderShader);\n  gl.linkProgram(renderProgram);\n\n  if (!gl.getProgramParameter(renderProgram, gl.LINK_STATUS)) {\n    console.error(\"Link failure\", gl.getProgramInfoLog(renderProgram));\n    throw new Error(\"Link failure\");\n  }\n\n  const depthProgram = gl.createProgram();\n  if (!depthProgram) throw new Error(\"Program creation failed\");\n  gl.attachShader(depthProgram, vertexShader);\n  gl.attachShader(depthProgram, depthShader);\n  gl.linkProgram(depthProgram);\n\n  if (!gl.getProgramParameter(depthProgram, gl.LINK_STATUS)) {\n    console.error(\"Link failure\", gl.getProgramInfoLog(depthProgram));\n    throw new Error(\"Link failure\");\n  }\n\n  const indexBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n  gl.bufferData(\n    gl.ELEMENT_ARRAY_BUFFER,\n    new Uint16Array(indices),\n    gl.STATIC_DRAW\n  );\n\n  const uvwBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, uvwBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(uvw), gl.STATIC_DRAW);\n\n  const targetTexture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, targetTexture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texImage2D(\n    gl.TEXTURE_2D,\n    0,\n    gl.RGBA,\n    width * devicePixelRatio,\n    height * devicePixelRatio,\n    0,\n    gl.RGBA,\n    gl.UNSIGNED_BYTE,\n    null\n  );\n\n  const depthBuffer = gl.createRenderbuffer();\n  gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuffer);\n  gl.renderbufferStorage(\n    gl.RENDERBUFFER,\n    gl.DEPTH_COMPONENT16,\n    width * devicePixelRatio,\n    height * devicePixelRatio\n  );\n\n  const framebuffer = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    targetTexture,\n    0\n  );\n  gl.framebufferRenderbuffer(\n    gl.FRAMEBUFFER,\n    gl.DEPTH_ATTACHMENT,\n    gl.RENDERBUFFER,\n    depthBuffer\n  );\n  gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n  gl.clearColor(0, 0, 0, 1);\n  gl.enable(gl.DEPTH_TEST);\n\n  const divide: (xyz: vec3, size: vec2) => vec3[] = (xyz, [width, height]) => {\n    const [x, y, z] = xyz;\n\n    const clip = tileShape(xyz)\n      ?.map(mercator)\n      .map(mercatorToLocal)\n      .map(localToClip);\n    if (\n      !clip ||\n      clip.every(([x, , , w]) => x > w) ||\n      clip.every(([x, , , w]) => x < -w) ||\n      clip.every(([, y, , w]) => y > w) ||\n      clip.every(([, y, , w]) => y < -w) ||\n      clip.every(([, , z, w]) => z > w) ||\n      clip.every(([, , z, w]) => z < -w) ||\n      clip.every(([, , , w]) => w < 0)\n    )\n      return [];\n\n    const pixels = clip.map(clipToScreen);\n    const size = Math.sqrt(\n      [0, 1, 2, 3]\n        .map((i) =>\n          vec2.squaredDistance(pixels[i], pixels[(i + 1) % pixels.length])\n        )\n        .reduce((a, b) => a + b, 0) / 4\n    );\n    if (size > 256 && z < 22) {\n      const divided: vec3[] = [\n        [2 * x, 2 * y, z + 1],\n        [2 * x + 1, 2 * y, z + 1],\n        [2 * x, 2 * y + 1, z + 1],\n        [2 * x + 1, 2 * y + 1, z + 1],\n      ];\n      if (divided.some((_) => !tileShape(_))) return [xyz];\n\n      return divided.flatMap((_) => divide(_, [width, height]));\n    } else return [xyz];\n  };\n\n  const recenter = (anchor: Anchor) => {\n    const { screen, world, distance } = anchor;\n\n    const [x, y] = screenToClip(screen);\n    const [ax, ay, az] = clipToLocal([x, y, -100, 1]);\n    const [bx, by, bz] = clipToLocal([x, y, 100, 1]);\n\n    const [t1] = quadratic(\n      (bx - ax) * (bx - ax) + (by - ay) * (by - ay) + (bz - az) * (bz - az),\n      ax * (bx - ax) + ay * (by - ay) + az * (bz - az),\n      ax * ax + ay * ay + az * az - distance * distance\n    );\n\n    const local: vec3 = [\n      ax + t1 * (bx - ax),\n      ay + t1 * (by - ay),\n      az + t1 * (bz - az),\n    ];\n\n    camera = geodetic(vec3.sub(vector, mercator(world), local));\n  };\n\n  const render = ({\n    depth,\n    width,\n    height,\n  }: {\n    width: number;\n    height: number;\n    depth?: boolean;\n  }) => {\n    const visible = divide([0, 0, 0], [width, height]);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    tiles.cancelUnused(() => {\n      if (depth) {\n        const uvwAttribute = gl.getAttribLocation(depthProgram, \"uvw\");\n        const projectionUniform = gl.getUniformLocation(\n          depthProgram,\n          \"projection\"\n        );\n        const modelViewUniform = gl.getUniformLocation(\n          depthProgram,\n          \"modelView\"\n        );\n        const terrainUniform = gl.getUniformLocation(depthProgram, \"terrain\");\n        const downsampleUniform = gl.getUniformLocation(\n          depthProgram,\n          \"downsample\"\n        );\n        const xyzUniform = gl.getUniformLocation(depthProgram, \"xyz\");\n        const cameraUniform = gl.getUniformLocation(depthProgram, \"camera\");\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        gl.bindBuffer(gl.ARRAY_BUFFER, uvwBuffer);\n        gl.vertexAttribPointer(uvwAttribute, 3, gl.FLOAT, false, 0, 0);\n        gl.enableVertexAttribArray(uvwAttribute);\n\n        gl.useProgram(depthProgram);\n        gl.uniform1i(terrainUniform, 0);\n        gl.uniformMatrix4fv(projectionUniform, false, projection);\n        gl.uniformMatrix4fv(modelViewUniform, false, modelView);\n        gl.uniform3iv(cameraUniform, [...to(mercator(camera))]);\n\n        for (const xyz of visible) {\n          const { texture: terrain, downsample } = tiles.terrain(xyz);\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, terrain);\n          gl.uniform1i(downsampleUniform, downsample);\n          gl.uniform3iv(xyzUniform, [...xyz]);\n\n          gl.drawElements(gl.TRIANGLES, n * n * 2 * 3, gl.UNSIGNED_SHORT, 0);\n        }\n      } else {\n        const uvwAttribute = gl.getAttribLocation(renderProgram, \"uvw\");\n        const projectionUniform = gl.getUniformLocation(\n          renderProgram,\n          \"projection\"\n        );\n        const modelViewUniform = gl.getUniformLocation(\n          renderProgram,\n          \"modelView\"\n        );\n        const imageryUniform = gl.getUniformLocation(renderProgram, \"imagery\");\n        const terrainUniform = gl.getUniformLocation(renderProgram, \"terrain\");\n        const downsampleImageryUniform = gl.getUniformLocation(\n          renderProgram,\n          \"downsampleImagery\"\n        );\n        const downsampleTerrainUniform = gl.getUniformLocation(\n          renderProgram,\n          \"downsampleTerrain\"\n        );\n        const xyzUniform = gl.getUniformLocation(renderProgram, \"xyz\");\n        const cameraUniform = gl.getUniformLocation(renderProgram, \"camera\");\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        gl.bindBuffer(gl.ARRAY_BUFFER, uvwBuffer);\n        gl.vertexAttribPointer(uvwAttribute, 3, gl.FLOAT, false, 0, 0);\n        gl.enableVertexAttribArray(uvwAttribute);\n\n        gl.useProgram(renderProgram);\n        gl.uniform1i(imageryUniform, 0);\n        gl.uniform1i(terrainUniform, 1);\n        gl.uniformMatrix4fv(projectionUniform, false, projection);\n        gl.uniformMatrix4fv(modelViewUniform, false, modelView);\n        gl.uniform3iv(cameraUniform, [...to(mercator(camera))]);\n\n        for (const xyz of visible) {\n          const { texture: imagery, downsample: downsampleImagery } =\n            tiles.imagery(xyz);\n          const { texture: terrain, downsample: downsampleTerrain } =\n            tiles.terrain(xyz);\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, imagery);\n          gl.activeTexture(gl.TEXTURE1);\n          gl.bindTexture(gl.TEXTURE_2D, terrain);\n          gl.uniform1i(downsampleImageryUniform, downsampleImagery);\n          gl.uniform1i(downsampleTerrainUniform, downsampleTerrain);\n          gl.uniform3iv(xyzUniform, [...xyz]);\n\n          gl.drawElements(gl.TRIANGLES, n * n * 2 * 3, gl.UNSIGNED_SHORT, 0);\n        }\n      }\n    });\n  };\n\n  const frame = () => {\n    const [, , z] = camera;\n    const [, , near] = mercator([0, 0, z / 100]);\n    const [, , far] = mercator([0, 0, 100 * z]);\n    mat4.identity(projection);\n    mat4.perspective(\n      projection,\n      (45 * Math.PI) / 180,\n      width / height,\n      near,\n      far\n    );\n    mat4.scale(projection, projection, [1, -1, 1]);\n\n    mat4.identity(modelView);\n    mat4.rotateX(modelView, modelView, pitch);\n    mat4.rotateZ(modelView, modelView, bearing);\n\n    if (anchor) recenter(anchor);\n\n    render({\n      width: width * devicePixelRatio,\n      height: height * devicePixelRatio,\n    });\n\n    requestAnimationFrame(frame);\n  };\n\n  const buffer = new Uint8Array(4);\n  const pick = ([screenX, screenY]: vec2) => {\n    const scale = 0.5;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    render({\n      width: Math.floor(width * scale),\n      height: Math.floor(height * scale),\n      depth: true,\n    });\n    gl.readPixels(\n      screenX * scale,\n      (height - screenY) * scale,\n      1,\n      1,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      buffer\n    );\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    const [r, g] = buffer;\n    const depth = (r * 256 + g) / (256 * 256 - 1);\n    const z = 2 * depth - 1;\n    const [x, y] = screenToClip([screenX, screenY]);\n    return localToWorld(clipToLocal([x, y, z, 1]));\n  };\n\n  const screenToClip = ([screenX, screenY]: vec2) => {\n    const x = (2 * screenX) / width - 1;\n    const y = -((2 * screenY) / height - 1);\n    return [x, y, 0, 1] as vec4;\n  };\n\n  const clipToScreen: (v: vec4) => vec2 = ([x, y, , w]) =>\n    [(x / w + 1) * width * 0.5, (1 - y / w) * height * 0.5] as vec2;\n\n  const clipToLocal = (v: vec4) => {\n    const transform = mat4.multiply(matrix, projection, modelView);\n    const inverse = mat4.invert(matrix, transform);\n    const [x, y, z, w] = vec4.transformMat4(vec4.create(), v, inverse);\n    return [x / w, y / w, z / w] as vec3;\n  };\n\n  const localToClip = ([x, y, z]: vec3) => {\n    const transform = mat4.multiply(matrix, projection, modelView);\n    return vec4.transformMat4(vec4.create(), [x, y, z, 1], transform);\n  };\n\n  const localToWorld = ([x, y, z]: vec3) => {\n    const [cx, cy, cz] = mercator(camera);\n    return geodetic([x + cx, y + cy, z + cz]);\n  };\n\n  const mercatorToLocal = ([x, y, z]: vec3) => {\n    const [cx, cy, cz] = mercator(camera);\n    return [x - cx, y - cy, z - cz] as vec3;\n  };\n\n  const destroy = () => {\n    resizer.unobserve(canvas);\n    // TODO: Destroy\n  };\n\n  requestAnimationFrame(frame);\n\n  return {\n    destroy,\n  };\n};\n","import { vec3 } from \"gl-matrix\";\nimport * as LruCache from \"lru-cache\";\nimport { imageryUrl, terrainUrl } from \"./constants\";\nimport { loadImage } from \"./image-load\";\n\nexport interface Tiles {\n  imagery: (xyz: vec3) => { texture: WebGLTexture; downsample: number };\n  terrain: (xyz: vec3) => { texture: WebGLTexture; downsample: number };\n  cancelUnused: (f: () => void) => void;\n}\n\nexport const createTiles: (gl: WebGLRenderingContext) => Tiles = (gl) => {\n  const imagery = (xyz: vec3) =>\n    downsampled({\n      url: imageryUrl,\n      xyz,\n      onLoad: () => {\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      },\n    });\n\n  const terrain = (xyz: vec3) =>\n    downsampled({\n      url: terrainUrl,\n      xyz,\n      downsample: 4,\n      onLoad: () => {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      },\n    });\n\n  const downsampled: (_: {\n    url: string;\n    xyz: vec3;\n    downsample?: number;\n    onLoad?: () => void;\n  }) => {\n    texture: WebGLTexture;\n    downsample: number;\n  } = ({ url, xyz, downsample = 0, onLoad }) => {\n    const [x, y, z] = xyz;\n    for (; downsample <= z; downsample++) {\n      const k = Math.pow(2, downsample);\n      const { loaded, texture } = get({\n        url,\n        xyz: [Math.floor(x / k), Math.floor(y / k), z - downsample],\n        onLoad,\n      });\n      if (loaded) return { texture, downsample };\n    }\n    const { texture } = get({\n      url,\n      xyz: [0, 0, 0],\n      onLoad,\n    });\n    return { texture, downsample: z };\n  };\n\n  interface Tile {\n    texture: WebGLTexture;\n    loaded: boolean;\n    dispose: () => void;\n  }\n\n  const tiles = new LruCache<string, Tile>({\n    max: 1000,\n    dispose: (tile) => {\n      tile.dispose();\n    },\n  });\n\n  const used = new Set<string>();\n  const get: (_: { url: string; xyz: vec3; onLoad?: () => void }) => Tile = ({\n    url,\n    xyz,\n    onLoad,\n  }) => {\n    const key = JSON.stringify({ url, xyz });\n    used.add(key);\n    const cached = tiles.get(key);\n    if (cached) return cached;\n\n    const tile = load({ url, xyz, onLoad });\n    tiles.set(key, tile);\n    return tile;\n  };\n\n  const load: (_: { url: string; xyz: vec3; onLoad?: () => void }) => Tile = ({\n    url,\n    xyz: [x, y, z],\n    onLoad,\n  }) => {\n    const texture = gl.createTexture();\n    if (!texture) throw new Error(\"Texture creation failed\");\n\n    url = url\n      .replace(\"{x}\", `${x}`)\n      .replace(\"{y}\", `${y}`)\n      .replace(\"{z}\", `${z}`);\n\n    const imageLoad = loadImage({\n      url,\n      onLoad: (image) => {\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          0,\n          gl.RGBA,\n          gl.RGBA,\n          gl.UNSIGNED_BYTE,\n          image\n        );\n        onLoad?.();\n      },\n    });\n\n    const dispose = () => {\n      imageLoad.cancel();\n      gl.deleteTexture(texture);\n    };\n\n    return {\n      texture,\n      get loaded() {\n        return imageLoad.loaded;\n      },\n      dispose,\n    };\n  };\n\n  const cancelUnused = (f: () => void) => {\n    used.clear();\n    f();\n    [...tiles.entries()]\n      .filter(([_]) => !used.has(_))\n      .filter(([, _]) => !_.loaded)\n      .forEach(([_]) => tiles.delete(_));\n  };\n\n  return { imagery, terrain, cancelUnused };\n};\n","attribute vec3 uvw;\nuniform mat4 projection;\nuniform mat4 modelView;\nuniform ivec3 xyz;\nuniform ivec3 camera;\nuniform sampler2D terrain;\nuniform int downsampleTerrain;\nuniform int downsampleImagery;\nvarying vec2 uvOut;\n\nconst int ONE = 1073741824; // 2^30\nconst float INV_ONE = 1. / float(ONE);\nconst float CIRCUMFERENCE = 40075017.;\n\nvec2 downsample(int downsample) {\n    float k = pow(2., float(downsample));\n    return (mod(vec2(xyz.xy), k) + uvw.xy) / k;\n}\n\nvoid main(void) {\n    vec4 e = texture2D(terrain, downsample(downsampleTerrain));\n    float t = (((256. * 256. * 255. * e.r) + (256. * 255. * e.g) + (255. * e.b)) / 10. - 10000.) / CIRCUMFERENCE;\n\n    int k = int(pow(2., float(xyz.z)));\n    ivec3 q = ivec3(uvw * float(ONE / k)) + ivec3(xyz.xy * (ONE / k), int(t * float(ONE)));\n    gl_Position = projection * modelView * vec4(vec3(q - camera) * INV_ONE, 1.);\n\n    uvOut = downsample(downsampleImagery);\n}\n","varying highp vec2 uvOut;\n\nuniform sampler2D imagery;\n\nvoid main(void) {\n  gl_FragColor = texture2D(imagery, uvOut);\n}","highp vec2 packDepth(in highp float depth) {\n  highp float depthVal = depth * (256. * 256. - 1.) / (256. * 256.);\n  highp vec3 encode = fract(depthVal * vec3(1., 256., 256. * 256.));\n  return encode.xy - encode.yz / 256. + 1. / 512.;\n}\n\nvoid main(void) {\n  gl_FragColor = vec4(packDepth(gl_FragCoord.z), 0, 1.);\n}\n","import { world } from \"./world\";\n\n/**\n * TODO:\n * explicit anchor\n * smooth transition\n * elevation tile -1\n * mercator elevation\n * subdivide const\n */\n\nworld(document.querySelector(\"canvas\") as HTMLCanvasElement);\n"],"names":["$78ae820aa9ececfa$export$fd293b15f47e270","$78ae820aa9ececfa$export$b67359430d3b1b2","Float32Array","Array","$78ae820aa9ececfa$export$5ada478c8a628231","Math","random","$78ae820aa9ececfa$export$cb2c0eb57f5e532c","type","$78ae820aa9ececfa$var$degree","PI","$78ae820aa9ececfa$export$408b8ee5959eefd5","a","$78ae820aa9ececfa$export$e9bab7fafb253603","b","abs","max","hypot","y","i","arguments","length","sqrt","$26675c4f95835ef1$export$185802fd694ee1f5","out","$26675c4f95835ef1$export$9cd59f9826255e47","$26675c4f95835ef1$export$784d13d8ee351f07","$26675c4f95835ef1$export$a82be99ed2a44a7d","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","$26675c4f95835ef1$export$adaa4cf7ef1b65be","$26675c4f95835ef1$export$f0954fd7d5368655","$26675c4f95835ef1$export$9cb09a71b7d66923","a01","a02","a03","a12","a13","a23","$26675c4f95835ef1$export$6897c284b6f9f4dc","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","$26675c4f95835ef1$export$33f3c024b4ae00a1","$26675c4f95835ef1$export$a04698f914c55ed9","$26675c4f95835ef1$export$2060d2db72cce88f","b0","b1","b2","b3","$26675c4f95835ef1$export$d73ee8ef04f5226a","v","x","z","$26675c4f95835ef1$export$dcdf75081b88279d","$26675c4f95835ef1$export$bb628a54ab399bc9","rad","axis","s","c","t","b12","b20","b21","b22","len","sin","cos","$26675c4f95835ef1$export$a59c8716592e09af","$26675c4f95835ef1$export$cf71e4d4ca4d1cfd","$26675c4f95835ef1$export$ea6eae3365de5b9c","$26675c4f95835ef1$export$bc9e79e74e9fddf6","$26675c4f95835ef1$export$832ca188ffb1955d","$26675c4f95835ef1$export$926fc125ff3c666c","$26675c4f95835ef1$export$dd47cc2f828c32ef","$26675c4f95835ef1$export$7dc997d67d2b7f33","$26675c4f95835ef1$export$ad5ddaedc8f405df","$26675c4f95835ef1$export$9545ac307f2a256b","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","$26675c4f95835ef1$export$ff497f2be31cc6a","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","$26675c4f95835ef1$export$202e99f82f7f0395","mat","$26675c4f95835ef1$export$71dc54d92bd04b57","$26675c4f95835ef1$export$df3937d3b537df0a","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","$26675c4f95835ef1$export$ddf9c55c9f2be172","sx","sy","sz","$26675c4f95835ef1$export$1def1f860edc4b1f","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","$26675c4f95835ef1$export$2ff2bbe382249af7","yx","zx","zy","$26675c4f95835ef1$export$89b5708c387cac6c","left","right","bottom","top","near","far","rl","tb","nf","$26675c4f95835ef1$export$4cf19729ec9a96b8","fovy","aspect","f","tan","Infinity","$26675c4f95835ef1$export$541149539f3a4684","$26675c4f95835ef1$export$294bba99a6af0c0c","$26675c4f95835ef1$export$58ae211c788e338f","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","$26675c4f95835ef1$export$c5f65ef3eb668f27","lr","bt","$26675c4f95835ef1$export$4f2167e613cfc87b","$26675c4f95835ef1$export$b1d31ea7b4d854e","$26675c4f95835ef1$export$d924e14fd6d9aa66","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","$26675c4f95835ef1$export$aa67782f4dc9e52c","target","$26675c4f95835ef1$export$42d51816ce590c93","$26675c4f95835ef1$export$326827e8268e9cdb","$26675c4f95835ef1$export$e16d8520af44a096","$26675c4f95835ef1$export$4e2d2ead65e5f7e3","$26675c4f95835ef1$export$c697bed75648cdb7","$26675c4f95835ef1$export$553579f63bdd7137","$26675c4f95835ef1$export$f2599a5cf1109d8","$26675c4f95835ef1$export$e9bab7fafb253603","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$26675c4f95835ef1$export$6e3a27864ab166fe","$26675c4f95835ef1$export$f93b5905241a7cca","$4ce98914b6676340$export$185802fd694ee1f5","$4ce98914b6676340$export$9cd59f9826255e47","$4ce98914b6676340$export$a82be99ed2a44a7d","$4ce98914b6676340$export$784d13d8ee351f07","$4ce98914b6676340$export$adaa4cf7ef1b65be","$4ce98914b6676340$export$e16d8520af44a096","$4ce98914b6676340$export$4e2d2ead65e5f7e3","$4ce98914b6676340$export$2060d2db72cce88f","$4ce98914b6676340$export$cd007d971a5a2143","$4ce98914b6676340$export$803ce6b71a0a94b2","ceil","$4ce98914b6676340$export$a3fe094919f356fd","floor","$4ce98914b6676340$export$96ec731ed4dcb222","min","$4ce98914b6676340$export$8960430cfd85939f","$4ce98914b6676340$export$2077e0241d6afd3c","round","$4ce98914b6676340$export$dcdf75081b88279d","$4ce98914b6676340$export$19cedf1da84ba854","$4ce98914b6676340$export$9f17032d917177de","$4ce98914b6676340$export$88e6ebb4fe54f538","$4ce98914b6676340$export$f24224f1c91d8156","$4ce98914b6676340$export$ab44e1323ffc8376","$4ce98914b6676340$export$aef51622e549b8b0","$4ce98914b6676340$export$70ae2c07e401031b","$4ce98914b6676340$export$a3295358bff77e","$4ce98914b6676340$export$fc1400facf92c78","$4ce98914b6676340$export$94132a0e348806d4","$4ce98914b6676340$export$bb646b20bb93d339","$4ce98914b6676340$export$3a89f8d6f6bf6c9f","$4ce98914b6676340$export$4385e60b38654f68","r","$4ce98914b6676340$export$b732428d73874bfc","m","$4ce98914b6676340$export$3e55bc4b3707dfd3","$4ce98914b6676340$export$f0bfa0a0024626ee","$4ce98914b6676340$export$5ffbd13800309d59","$4ce98914b6676340$export$bb628a54ab399bc9","p0","p1","sinC","cosC","$4ce98914b6676340$export$944b09d2ad10b378","mag","cosine","acos","$4ce98914b6676340$export$7f9972325ebfd559","$4ce98914b6676340$export$42d51816ce590c93","$4ce98914b6676340$export$f2599a5cf1109d8","$4ce98914b6676340$export$e9bab7fafb253603","vec","$4ce98914b6676340$export$f93b5905241a7cca","$4ce98914b6676340$export$6e3a27864ab166fe","$4ce98914b6676340$export$159d9494db57879b","$4ce98914b6676340$export$6c4a311cc157c764","$4ce98914b6676340$export$2422cd6c492a8b3a","$4ce98914b6676340$export$99d8dd3f32a3435","$4ce98914b6676340$export$4b80e395e36b5a56","stride","offset","count","fn","arg","l","$ab7f6dc0910e1ef7$export$185802fd694ee1f5","$ab7f6dc0910e1ef7$export$9cd59f9826255e47","$ab7f6dc0910e1ef7$export$f24224f1c91d8156","$ab7f6dc0910e1ef7$export$a82be99ed2a44a7d","$ab7f6dc0910e1ef7$export$784d13d8ee351f07","$ab7f6dc0910e1ef7$export$adaa4cf7ef1b65be","$ab7f6dc0910e1ef7$export$e16d8520af44a096","$ab7f6dc0910e1ef7$export$4e2d2ead65e5f7e3","$ab7f6dc0910e1ef7$export$2060d2db72cce88f","$ab7f6dc0910e1ef7$export$cd007d971a5a2143","$ab7f6dc0910e1ef7$export$803ce6b71a0a94b2","$ab7f6dc0910e1ef7$export$a3fe094919f356fd","$ab7f6dc0910e1ef7$export$96ec731ed4dcb222","$ab7f6dc0910e1ef7$export$8960430cfd85939f","$ab7f6dc0910e1ef7$export$2077e0241d6afd3c","$ab7f6dc0910e1ef7$export$dcdf75081b88279d","$ab7f6dc0910e1ef7$export$19cedf1da84ba854","$ab7f6dc0910e1ef7$export$9f17032d917177de","$ab7f6dc0910e1ef7$export$88e6ebb4fe54f538","$ab7f6dc0910e1ef7$export$ab44e1323ffc8376","$ab7f6dc0910e1ef7$export$aef51622e549b8b0","$ab7f6dc0910e1ef7$export$70ae2c07e401031b","$ab7f6dc0910e1ef7$export$a3295358bff77e","$ab7f6dc0910e1ef7$export$fc1400facf92c78","$ab7f6dc0910e1ef7$export$94132a0e348806d4","$ab7f6dc0910e1ef7$export$bb646b20bb93d339","$ab7f6dc0910e1ef7$export$3a89f8d6f6bf6c9f","$ab7f6dc0910e1ef7$export$ae8865616f30561c","d","factorTimes2","factor1","factor2","factor3","factor4","$ab7f6dc0910e1ef7$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$ab7f6dc0910e1ef7$export$4385e60b38654f68","zScale","$ab7f6dc0910e1ef7$export$5ffbd13800309d59","$ab7f6dc0910e1ef7$export$f0bfa0a0024626ee","$ab7f6dc0910e1ef7$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$ab7f6dc0910e1ef7$export$a59c8716592e09af","p","$ab7f6dc0910e1ef7$export$cf71e4d4ca4d1cfd","$ab7f6dc0910e1ef7$export$ea6eae3365de5b9c","$ab7f6dc0910e1ef7$export$944b09d2ad10b378","$ab7f6dc0910e1ef7$export$7f9972325ebfd559","$ab7f6dc0910e1ef7$export$42d51816ce590c93","$ab7f6dc0910e1ef7$export$f2599a5cf1109d8","$ab7f6dc0910e1ef7$export$e9bab7fafb253603","$ab7f6dc0910e1ef7$export$f93b5905241a7cca","$ab7f6dc0910e1ef7$export$6e3a27864ab166fe","$ab7f6dc0910e1ef7$export$159d9494db57879b","$ab7f6dc0910e1ef7$export$6c4a311cc157c764","$ab7f6dc0910e1ef7$export$2422cd6c492a8b3a","$ab7f6dc0910e1ef7$export$99d8dd3f32a3435","$ab7f6dc0910e1ef7$export$4b80e395e36b5a56","$e38eb280d3b76273$export$185802fd694ee1f5","$e38eb280d3b76273$export$9cd59f9826255e47","$e38eb280d3b76273$export$a82be99ed2a44a7d","$e38eb280d3b76273$export$784d13d8ee351f07","$e38eb280d3b76273$export$adaa4cf7ef1b65be","$e38eb280d3b76273$export$e16d8520af44a096","$e38eb280d3b76273$export$4e2d2ead65e5f7e3","$e38eb280d3b76273$export$2060d2db72cce88f","$e38eb280d3b76273$export$cd007d971a5a2143","$e38eb280d3b76273$export$803ce6b71a0a94b2","$e38eb280d3b76273$export$a3fe094919f356fd","$e38eb280d3b76273$export$96ec731ed4dcb222","$e38eb280d3b76273$export$8960430cfd85939f","$e38eb280d3b76273$export$2077e0241d6afd3c","$e38eb280d3b76273$export$dcdf75081b88279d","$e38eb280d3b76273$export$19cedf1da84ba854","$e38eb280d3b76273$export$9f17032d917177de","$e38eb280d3b76273$export$88e6ebb4fe54f538","$e38eb280d3b76273$export$f24224f1c91d8156","$e38eb280d3b76273$export$ab44e1323ffc8376","$e38eb280d3b76273$export$aef51622e549b8b0","$e38eb280d3b76273$export$70ae2c07e401031b","$e38eb280d3b76273$export$a3295358bff77e","$e38eb280d3b76273$export$fc1400facf92c78","$e38eb280d3b76273$export$94132a0e348806d4","$e38eb280d3b76273$export$bb646b20bb93d339","u","A","B","C","D","E","F","G","H","I","J","$e38eb280d3b76273$export$3a89f8d6f6bf6c9f","$e38eb280d3b76273$export$4385e60b38654f68","v1","v2","v3","v4","s1","s2","$e38eb280d3b76273$export$5ffbd13800309d59","$e38eb280d3b76273$export$c32adef9e939ce85","ix","iy","iz","iw","$e38eb280d3b76273$export$7f9972325ebfd559","$e38eb280d3b76273$export$42d51816ce590c93","$e38eb280d3b76273$export$f2599a5cf1109d8","$e38eb280d3b76273$export$e9bab7fafb253603","$e38eb280d3b76273$export$f93b5905241a7cca","$e38eb280d3b76273$export$6e3a27864ab166fe","$e38eb280d3b76273$export$159d9494db57879b","$e38eb280d3b76273$export$6c4a311cc157c764","$e38eb280d3b76273$export$2422cd6c492a8b3a","$e38eb280d3b76273$export$99d8dd3f32a3435","$e38eb280d3b76273$export$4b80e395e36b5a56","$b7a1dabe93a79a87$export$d02631cccf789723","start","end","from","_","k","$9ecda7333d28e490$export$2bd61ddafd4c45de","$1669b27dd88d6d65$export$5500accb23082eb0","lng","lat","alt","asinh","$1669b27dd88d6d65$export$6538c0e1ba99bfeb","atan","sinh","$1669b27dd88d6d65$export$e5762d5d70936974","pow","$cfae44f0dfdf62c0$var$cachedSetTimeout","$cfae44f0dfdf62c0$var$cachedClearTimeout","$cfae44f0dfdf62c0$var$process","$cfae44f0dfdf62c0$exports","$cfae44f0dfdf62c0$var$defaultSetTimout","Error","$cfae44f0dfdf62c0$var$defaultClearTimeout","$cfae44f0dfdf62c0$var$runTimeout","fun","setTimeout","e","call","this","clearTimeout","e1","$cfae44f0dfdf62c0$var$currentQueue","$cfae44f0dfdf62c0$var$queue","$cfae44f0dfdf62c0$var$draining","$cfae44f0dfdf62c0$var$queueIndex","$cfae44f0dfdf62c0$var$cleanUpNextTick","concat","$cfae44f0dfdf62c0$var$drainQueue","timeout","run","marker","$cfae44f0dfdf62c0$var$runClearTimeout","$cfae44f0dfdf62c0$var$Item","array","$cfae44f0dfdf62c0$var$noop","nextTick","args","push","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","$849cd0fb8cde656f$var$perf","performance","now","Date","$849cd0fb8cde656f$var$warned","Set","$849cd0fb8cde656f$var$deprecatedOption","opt","instead","code","$849cd0fb8cde656f$var$shouldWarn","$849cd0fb8cde656f$var$warn","$849cd0fb8cde656f$var$LRUCache","$849cd0fb8cde656f$var$deprecatedMethod","method","get","Object","getOwnPropertyDescriptor","has","what","add","msg","emitWarning","$849cd0fb8cde656f$var$isPosInt","n","isFinite","$849cd0fb8cde656f$var$getUintArray","Uint8Array","Uint16Array","Uint32Array","Number","MAX_SAFE_INTEGER","$849cd0fb8cde656f$var$ZeroArray","size","super","fill","$849cd0fb8cde656f$var$Stack","UintArray","heap","pop","options","ttl","ttlResolution","ttlAutopurge","updateAgeOnGet","allowStale","dispose","disposeAfter","noDisposeOnSet","noUpdateTTL","maxSize","sizeCalculation","fetchMethod","maxAge","stale","TypeError","keyMap","Map","keyList","valList","next","prev","head","tail","free","initialFill","disposed","initializeSizeTracking","initializeTTLTracking","getRemainingTTL","key","ttls","starts","setItemTTL","index","isStale","delete","unref","updateItemAge","cachedNow","getNow","undefined","calculatedSize","sizes","removeItemSize","requireSize","addItemSize","evict","isValidIndex","indexes","rindexes","Symbol","iterator","entries","find","getOptions","forEach","thisp","rforEach","prune","purgeStale","deleted","dump","arr","entry","unshift","load","clear","set","value","reason","newIndex","oldVal","moveToTail","shift","val","peek","backgroundFetch","isBackgroundFetch","Promise","resolve","then","__staleWhileFetching","hasOwnProperty","fetching","connect","del","index1","reset","field","$849cd0fb8cde656f$var$deprecatedProperty","$3edb193b462352e9$export$fe58198efe02b173","url","onLoad","onError","loaded","image","Image","crossOrigin","onload","async","onerror","error","toString","src","$10f5a3ba438cc0ea$var$cache","$849cd0fb8cde656f$exports","$10f5a3ba438cc0ea$export$845e8aeb9a42ea24","map","px","py","cached","result","$10f5a3ba438cc0ea$var$tile","query","$10f5a3ba438cc0ea$var$tileCache","join","$10f5a3ba438cc0ea$var$loadTile","replace","width","height","canvas","document","createElement","context","getContext","drawImage","data","getImageData","g","console","warn","$cc7ea743021353a7$var$tileShapes","$cc7ea743021353a7$var$tileShapesCalculations","$cc7ea743021353a7$export$b4a63dccbe69f1de","$cc7ea743021353a7$var$calculateTileShape","all","$78ae820aa9ececfa$exports","setMatrixArrayType","$3aec07e3cb255787$var$to","$3aec07e3cb255787$var$indices","flatMap","$3aec07e3cb255787$var$uvw","$3aec07e3cb255787$var$n","anchor1","camera","bearing","pitch","width1","clientWidth","height1","clientHeight","projection","$26675c4f95835ef1$exports","create","modelView","matrix","vector","$ab7f6dc0910e1ef7$exports","mouseAnchor","screen","$3aec07e3cb255787$export$f965ae91e38a1274","pick","distance","clearAnchor","delay","$b7a1dabe93a79a87$export$61fc7d43ac8f84b0","addEventListener","buttons","movementX","movementY","event","preventDefault","exp","deltaY","resizer","ResizeObserver","contentRect","gl","viewport","observe","tiles","downsampled","xyz","downsample","texture","tile","used","JSON","stringify","createTexture","imageLoad","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","cancel","deleteTexture","generateMipmap","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","NEAREST","filter","$5388b6fb78689f9a$export$7ebdf5380eefd0f3","loadShader","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","deleteShader","vertexShader","VERTEX_SHADER","$parcel$interopDefault","renderShader","FRAGMENT_SHADER","depthShader","renderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","depthProgram","indexBuffer","createBuffer","bindBuffer","ELEMENT_ARRAY_BUFFER","bufferData","STATIC_DRAW","uvwBuffer","ARRAY_BUFFER","targetTexture","devicePixelRatio","depthBuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","framebufferRenderbuffer","DEPTH_ATTACHMENT","clearColor","enable","DEPTH_TEST","divide","clip","mercatorToLocal","localToClip","every","pixels","clipToScreen","$4ce98914b6676340$exports","squaredDistance","reduce","divided","some","recenter","anchor","world","screenToClip","clipToLocal","t1","$1669b27dd88d6d65$export$26003e3bc38c881e","local","sub","render","depth","visible","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","cancelUnused","uvwAttribute","getAttribLocation","projectionUniform","getUniformLocation","modelViewUniform","terrainUniform","downsampleUniform","xyzUniform","cameraUniform","vertexAttribPointer","FLOAT","enableVertexAttribArray","useProgram","uniform1i","uniformMatrix4fv","uniform3iv","terrain","activeTexture","TEXTURE0","drawElements","TRIANGLES","UNSIGNED_SHORT","imageryUniform","downsampleImageryUniform","downsampleTerrainUniform","imagery","downsampleImagery","downsampleTerrain","TEXTURE1","frame","identity","perspective","scale","rotateX","rotateZ","requestAnimationFrame","buffer","screenX","screenY","readPixels","localToWorld","transform","multiply","inverse","invert","$e38eb280d3b76273$exports","transformMat4","cx","cy","cz","querySelector"],"version":3,"file":"index.92df6012.js.map"}